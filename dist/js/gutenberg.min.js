!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=86)}({40:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={auth:!0,ready:!1},o=(0,wp.data.registerStore)("apple-maps-for-wordpress",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;switch(arguments[1].type){case"APPLE_MAP_AUTH_FAILED":e={auth:!1,ready:!1};break;case"APPLE_MAP_KIT_READY":e={ready:!0,auth:!0}}return e},selectors:{getAppleMapsState:function(e){return e}},actions:{mapKitReady:function(){return{type:"APPLE_MAP_KIT_READY"}},authFailed:function(){return{type:"APPLE_MAP_AUTH_FAILED"}}}});t.default=o},83:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={width:{type:"string",default:"100"},height:{type:"string",default:"600"},latitude:{type:"number"},longitude:{type:"number"},latitudeDelta:{type:"number"},longitudeDelta:{type:"number"},mapID:{type:"string"},address:{type:"string"}}},84:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(40),i=(n=r)&&n.__esModule?n:{default:n};var l=wp.element.Component,u=wp.editor.InspectorControls,s=wp.components,d=s.PanelBody,c=s.PanelRow,p=s.TextControl,f=wp.data.select,h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleGeoCode=a.handleGeoCode.bind(a),a.geolocate=a.geolocate.bind(a),a.stateChanges=a.stateChanges.bind(a),a.state={auth:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l),o(t,[{key:"componentDidMount",value:function(){mapkit&&"undefined"!=typeof mapkit&&(this.map=new mapkit.Map(document.getElementById(this.props.id)),this.map.showsMapTypeControl=!1,this.map.showsCompass=mapkit.FeatureVisibility.Hidden,this.geocoder=new mapkit.Geocoder,this.props.setAttributes({mapID:this.props.id}),this.setMapDisplay(),this.mapHandlers()),i.default.subscribe(this.stateChanges)}},{key:"stateChanges",value:function(){var e=f("apple-maps-for-wordpress").getAppleMapsState();this.setState({auth:e.auth})}},{key:"setMapDisplay",value:function(){var e=this.props.attributes,t=e.latitude,a=e.longitude,n=e.latitudeDelta,o=e.longitudeDelta;t&&a&&n&&o?this.map.region=new mapkit.CoordinateRegion(new mapkit.Coordinate(t,a),new mapkit.CoordinateSpan(n,o)):this.updateLocationZoomData(this.map.region)}},{key:"handleGeoCode",value:function(e){e&&this.geocoder.lookup(e,this.geolocate)}},{key:"geolocate",value:function(e,t){if(t.results){var a=t.results[0].region;this.map.region=new mapkit.CoordinateRegion(new mapkit.Coordinate(a.center.latitude,a.center.longitude),new mapkit.CoordinateSpan(a.span.latitudeDelta,a.span.longitudeDelta)),this.updateLocationZoomData(a)}}},{key:"mapHandlers",value:function(){var e=this;this.map.addEventListener("scroll-end",function(t){e.updateLocationZoomData(t.target.region)}),this.map.addEventListener("zoom-end",function(t){e.updateLocationZoomData(t.target.region)})}},{key:"updateLocationZoomData",value:function(e){var t=e.center,a=e.span;this.props.setAttributes({latitude:t.latitude,longitude:t.longitude,latitudeDelta:a.latitudeDelta,longitudeDelta:a.longitudeDelta})}},{key:"render",value:function(){var e=this,t=this.props,a=t.attributes,n=a.width,o=a.height,r=a.address,i=a.latitude,l=a.longitude,s=t.className,f=t.setAttributes,h=t.clientId,m={width:n+"%",height:o+"px"};return[React.createElement(u,null,React.createElement(d,{title:"Settings"},React.createElement(c,null,React.createElement(p,{label:"Address",value:r,onChange:function(t){return function(t){e.handleGeoCode(t),f({address:t})}(t)}})),React.createElement(c,null,React.createElement(p,{label:"Width ( % )",value:n,onChange:function(e){return f({width:e})}})),React.createElement(c,null,React.createElement(p,{label:"Height ( pixels )",value:o,onChange:function(e){return f({height:e})}})),React.createElement(c,null,React.createElement(p,{readonly:"readonly",label:"Latitude",value:i})),React.createElement(c,null,React.createElement(p,{readonly:"readonly",label:"Longitude",value:l})))),React.createElement("div",{className:s},!this.state.auth&&React.createElement("div",{className:"editor-warning no-auth"},"MapKit JS did not authenticate. Please refresh your token in the settings."),React.createElement("div",{id:h,style:m}))]}}]),t}();t.default=h},85:function(e,t,a){"use strict";var n=r(a(84)),o=r(a(83));function r(e){return e&&e.__esModule?e:{default:e}}var i=wp.i18n.__;(0,wp.blocks.registerBlockType)("tenup/apple-map-for-wordpress",{title:i("Apple Maps for WordPress"),icon:"location",category:"embed",attributes:o.default,edit:n.default,save:function(e){var t=e.attributes,a=t.width,n=t.height,o=t.latitude,r=t.longitude,i=t.latitudeDelta,l=t.longitudeDelta,u=t.mapID,s={width:a+"%",height:n+"px"};return React.createElement("div",{className:"apple-maps-for-wordpress",id:u,style:s,"data-lat":o,"data-long":r,"data-latd":i,"data-longd":l})}})},86:function(e,t,a){"use strict";a(85),a(40)}});
//# sourceMappingURL=gutenberg.min.js.map